<body>

<div class="split-container">
  <div data-section="accordion" id="content-nav" class="module-nav media">
    <div class="module-sidebar" id="content-sidebar"><div class='sidebar-head'>moov_perf</div><div class='sidebar-body'><a href='/modules/moov_perf/index' class='L1'>README</a><div class='L1-container'><div class='L1-button'><a href="$.html" class="L1">$ Namespace</a></div><ul class='methods L1-content'><li data-type='method'><a href="$#.optimizeImg" class="L1">.optimizeImg()</a></li><li data-type='method'><a href="$#.quality" class="L1">.quality()</a></li></ul></div><div class='L1-container'><div class='L1-button'><a href="perf.html" class="L1">perf Namespace</a></div><ul class='methods L1-content'><li data-type='method'><a href="perf#.blacklistContains" class="L1">.blacklistContains()</a></li><li data-type='method'><a href="perf#.ignore" class="L1">.ignore()</a></li><li data-type='method'><a href="perf#.ignored" class="L1">.ignored()</a></li><li data-type='method'><a href="perf#.optimizedAttrs" class="L1">.optimizedAttrs()</a></li><li data-type='method'><a href="perf#.optimizeImageAttribs" class="L1">.optimizeImageAttribs()</a></li></ul></div></div></div>
  </div>

  <div id="main" class="module-content data">
      
      <div class="breadcrumbs">
        <a href="/">Home</a>
        &raquo; <a href="/docs">Documentation</a>
        &raquo; <a href="/modules/moov_perf/index">moov_perf</a>
        &raquo; perf Namespace
      </div>
      <h1 class="page-title">perf Namespace</h1>
      

      




<section>

<header>
    
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <p class="description">A namespace containing methods for performance optimizations.</p>
            <hr />
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

        
            

    

    <h2 class="name" id=".blacklistContains">
        .blacklistContains<span class="signature">(domain)</span>
        
          <small class="line-source">
            
              <div class="mw-banner moov_perf">moov_perf</div>
            
            <a href="moov_perf_js#line181">Source (L181)</a>
          </small>
        
    </h2>




<p class="description">
    Checks whether the domain is blacklisted. Note that domains to
check should not include any protocols or paths.
</p>









    <h3>Parameters</h3>
    <div class="table-wrapper">
      

<table class="table params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>domain</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the domain to check.</td>
        </tr>

    
    </tbody>
</table>

    </div>













<h3>Return Value</h3>

        
<p class="param-desc">
    A boolean for whether the domain is in the blacklist.
</p>


    


    <h3>Example</h3>
    
    <pre><code class="language-javascript">const Perf = require("moov_perf");
let perf = new Perf($);
perf.ignore("http://www.google.com/");
perf.blacklistContains("www.google.com");
// => Returns: true
perf.blacklistContains("http://www.google.com/");
// => Returns: false</code></pre>




<p>
  <a href="#top">Back to top</a>
</p>

<hr />

        
            

    

    <h2 class="name" id=".ignore">
        .ignore<span class="signature">(domain)</span>
        
          <small class="line-source">
            
              <div class="mw-banner moov_perf">moov_perf</div>
            
            <a href="moov_perf_js#line457">Source (L457)</a>
          </small>
        
    </h2>




<p class="description">
    Add domain to the Perf instance's blacklist. Thus, when using
any of the image optimization methods for a given Cheerio object selector, it
will specifically avoid rewriting the image source for any domains included
in the ignored list. This method will strip off the protocol, as well as any
trailing path.
</p>









    <h3>Parameters</h3>
    <div class="table-wrapper">
      

<table class="table params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>domain</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the domain to ignore.</td>
        </tr>

    
    </tbody>
</table>

    </div>













<h3>Return Value</h3>

        
<p class="param-desc">
    The original Perf instance.
</p>


    


    <h3>Example</h3>
    
    <pre><code class="language-javascript">const Perf = require("moov_perf");
let perf = new Perf($);
perf.ignore("http://www.google.com/");
// => Returns: The Perf object instance assigned to `perf`

perf.ignore("http://www.bing.com");
perf.ignore("http://www.yahoo.com/image.jpg");
perf.ignored();
// => Returns: {
//      "www.google.com": true,
//      "www.bing.com": true,
//      "www.yahoo.com": true
//    }</code></pre>




<p>
  <a href="#top">Back to top</a>
</p>

<hr />

        
            

    

    <h2 class="name" id=".ignored">
        .ignored<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner moov_perf">moov_perf</div>
            
            <a href="moov_perf_js#line431">Source (L431)</a>
          </small>
        
    </h2>




<p class="description">
    View the Perf instance's blacklisted domains, which are the
domains that do not get rewritten to reference Moovweb's image optimization
domain. Domains added to this list via the `.ignore()` method will strip off
the protocol and any trailing path.
</p>





















<h3>Return Value</h3>

        
<p class="param-desc">
    An object containing all domains currently being ignored.
</p>


    


    <h3>Example</h3>
    
    <pre><code class="language-javascript">const Perf = require("moov_perf");
let perf = new Perf($);
perf.ignore("http://www.google.com/");
perf.ignore("http://www.bing.com");
perf.ignore("http://www.yahoo.com/image.jpg");
perf.ignored();
// => Returns: {
//      "www.google.com": true,
//      "www.bing.com": true,
//      "www.yahoo.com": true
//    }</code></pre>




<p>
  <a href="#top">Back to top</a>
</p>

<hr />

        
            

    

    <h2 class="name" id=".optimizedAttrs">
        .optimizedAttrs<span class="signature">(domain, [opts])</span>
        
          <small class="line-source">
            
              <div class="mw-banner moov_perf">moov_perf</div>
            
            <a href="moov_perf_js#line220">Source (L220)</a>
          </small>
        
    </h2>




<p class="description">
    Provides a first pass to convert an object containing options
meant to be applied to an optimized image element (as passed into other
public helper methods), including a newly-generated `src` attribute.
</p>









    <h3>Parameters</h3>
    <div class="table-wrapper">
      

<table class="table params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>domain</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the image source.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>opts</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                An object containing optimization options. The
default options object is `{ link_encoded: false, preserve_aspect: true }`,
unless the host is blacklisted (in which case, the object only contains
`bypass_attributes: true`, a reserved property-value pair for knowing not to
set height or width HTML attributes). The usable attributes are as follows:
                <h5>Properties</h5>
                

<table class="table params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  [
                  <code>bypass_attributes</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether
attributes should be bypassed from the optimized image elemetnt.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>width</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A number or a string containing the
number for the desired pixel width.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>height</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A number or string containing the number
for the desired pixel height.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>link_encoded</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether the link
should be base64-encoded.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>preserve_aspect</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether the aspect
ratio should be preserved, provded that only one dimension is given. If both
dimensions are given, width is given priority. If both dimensions are set,
this setting is ignored.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>quality</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A number or string containing the
number for the desired quality, on a scale from 1 (worst) to 100 (best).</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>format</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A string containing the desired file format.
Options include jpg, png, and webp.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

    </div>













<h3>Return Value</h3>

        
<p class="param-desc">
    A first-pass object containing attributes to apply to an
image node.
</p>


    


    <h3>Examples</h3>
    
    <pre><code class="language-javascript">const Perf = require("moov_perf");
let perf = new Perf($);
perf.ignore("www.moovweb.com");
perf.optimizedAttrs("http://www.moovweb.com/img.jpg", {height: 300});
Returns: { height: 300, bypass_attributes: true, src: 'http://www.moovweb.com/selfie.jpg' }</code></pre>

    <pre><code class="language-javascript">let perf = new Perf($);
perf.ignore("www.moovweb.com");
perf.optimizedAttrs("http://www.google.com/img.jpg", {height: 300});
Returns: { height: 300, bypass_attributes: true, src: 'http://www.moovweb.com/selfie.jpg' }</code></pre>




<p>
  <a href="#top">Back to top</a>
</p>

<hr />

        
            

    

    <h2 class="name" id=".optimizeImageAttribs">
        .optimizeImageAttribs<span class="signature">(node, [opts])</span>
        
          <small class="line-source">
            
              <div class="mw-banner moov_perf">moov_perf</div>
            
            <a href="moov_perf_js#line344">Source (L344)</a>
          </small>
        
    </h2>




<p class="description">
    Provides a second pass to convert an object containing options
meant to be applied to an optimized image element. Note that this calls the
"first-pass" `.optimizedAttrs()` method with the given settings object. This
second pass most notably does the following two things: it allows for the
use of `data-src` (in the case of a lazyloading usage), and it retains any
width or height dimensions for the purpose HTML attribute usage.
</p>









    <h3>Parameters</h3>
    <div class="table-wrapper">
      

<table class="table params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>node</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            <td class="description last">
                
                An image node element.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>opts</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                An object containing optimization options. The
default is the list of attributes attached to the input node, along with the
settings that come from the `.optimizedAttrs()` method
(`{ link_encoded: false, preserve_aspect: true }`, unless the host is
blacklisted, in which case, the object only contains
`bypass_attributes: true`, a reserved property-value pair for knowing not to
set height or width HTML attributes). The usable attributes (that get passed
in to other Perf methods) are as follows:
                <h5>Properties</h5>
                

<table class="table params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  [
                  <code>bypass_attributes</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether
attributes should be bypassed from the optimized image elemetnt.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>width</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A number or string containing the number
for the desired pixel width.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>height</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A number or string containing the number
for the desired pixel height.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>link_encoded</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether the link
should be base64-encoded.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>preserve_aspect</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether the aspect
ratio should be preserved, provded that only one dimension is given. If both
dimensions are given, width is given priority. If both dimensions are set,
this setting is ignored.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>quality</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>
|

<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A number or string containing the
number for the desired quality, on a scale from 1 (worst) to 100 (best).</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>format</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A string containing the desired file format.
Options include jpg, png, and webp.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

    </div>













<h3>Return Value</h3>
<ul>
        <li>
<p class="param-desc">
    A second-pass object containing attributes to apply to an
image node.
</p>

</li>
    
        <li>
<p class="param-desc">
    An object containing the second-pass optimized form of
attributes, including the original node attributes, with some or all that may
be overridden by the input options, as well as support for `data-src` and
dimension* attributes.
</p>

</li>
    </ul>


    <h3>Examples</h3>
    
    <pre><code class="language-javascript">const Perf = require("moov_perf");
let perf = new Perf($);
let bingTag = tag("img", {src: "http://www.bing.com/selfie.jpg"});
console.log(perf.optimizeImageAttribs(bingTag, {height: 300}));
// => Returns: { src: '//opt.moovweb.net/img?img=http%3A%2F%2Fwww.bing.com%2Fselfie.jpg&amp;linkEncoded=0&amp;height=300&amp;preserve_aspect=1&amp;preserve_aspect=1', height: 300}</code></pre>

    <pre><code class="language-javascript">let perf = new Perf($);
let moovTag = tag("img", {src: "http://www.moovweb.com/selfie.jpg"});
perf.ignore("http://www.moovweb.com/");
console.log(perf.optimizeImageAttribs(moovTag, {height: 300}));
// => Returns: { src: 'http://www.moovweb.com/selfie.jpg', height: 300 }</code></pre>




<p>
  <a href="#top">Back to top</a>
</p>

<hr />

        
    

    

    
</article>

</section>




      <div class="timestamp">
          <i>Last updated Mon Feb 26 2018 22:51:26 GMT+0000 (UTC)</i>
      </div>
  </div>
</div>
</body>