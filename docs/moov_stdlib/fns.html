<body>

<div data-section="accordion" id="content-nav">
  <section>
      <ul class="doc-sidebar" data-section-content id="content-sidebar"><div data-section="accordion"><section class="active"><a href="#" class="module-one" data-section-title>Namespaces</a><ul data-section-content><div data-section='accordion'><section class='active'><a href="fns" class="" data-section-title>fns</a><ul class='methods' data-section-content><li data-type='method'><a href="fns#.absolutize">.absolutize()</a></li><li data-type='method'><a href="fns#.absolutizeSrcs">.absolutizeSrcs()</a></li><li data-type='method'><a href="fns#.activeLayers">.activeLayers()</a></li><li data-type='method'><a href="fns#.addAssets">.addAssets()</a></li><li data-type='method'><a href="fns#.addCanonicalTag">.addCanonicalTag()</a></li><li data-type='method'><a href="fns#.addCookie">.addCookie()</a></li><li data-type='method'><a href="fns#.assert">.assert()</a></li><li data-type='method'><a href="fns#.asset">.asset()</a></li><li data-type='method'><a href="fns#.cleanMobileMetaTags">.cleanMobileMetaTags()</a></li><li data-type='method'><a href="fns#.export">.export()</a></li><li data-type='method'><a href="fns#.getPageType">.getPageType()</a></li><li data-type='method'><a href="fns#.handleRobots">.handleRobots()</a></li><li data-type='method'><a href="fns#.highlightDevelopment">.highlightDevelopment()</a></li><li data-type='method'><a href="fns#.highlightPreview">.highlightPreview()</a></li><li data-type='method'><a href="fns#.init$">.init$()</a></li><li data-type='method'><a href="fns#.insertDnsPrefetch">.insertDnsPrefetch()</a></li><li data-type='method'><a href="fns#.insertSubresource">.insertSubresource()</a></li><li data-type='method'><a href="fns#.isRobots">.isRobots()</a></li><li data-type='method'><a href="fns#.layer">.layer()</a></li><li data-type='method'><a href="fns#.layerNot">.layerNot()</a></li><li data-type='method'><a href="fns#.moveStylesAboveScripts">.moveStylesAboveScripts()</a></li><li data-type='method'><a href="fns#.moveStylesToHead">.moveStylesToHead()</a></li><li data-type='method'><a href="fns#.onDevelopment">.onDevelopment()</a></li><li data-type='method'><a href="fns#.perfectProxy">.perfectProxy()</a></li><li data-type='method'><a href="fns#.queryLayerText">.queryLayerText()</a></li><li data-type='method'><a href="fns#.relocateScripts">.relocateScripts()</a></li><li data-type='method'><a href="fns#.removeAllStyles">.removeAllStyles()</a></li><li data-type='method'><a href="fns#.removeDesktopJs">.removeDesktopJs()</a></li><li data-type='method'><a href="fns#.removeDesktopMobileIcon">.removeDesktopMobileIcon()</a></li><li data-type='method'><a href="fns#.removeHtmlComments">.removeHtmlComments()</a></li><li data-type='method'><a href="fns#.rewriteAspNetScripts">.rewriteAspNetScripts()</a></li><li data-type='method'><a href="fns#.rewriteJsSrcs">.rewriteJsSrcs()</a></li><li data-type='method'><a href="fns#.rewriteLink">.rewriteLink()</a></li><li data-type='method'><a href="fns#.rewriteLinks">.rewriteLinks()</a></li><li data-type='method'><a href="fns#.rewriteToProxy">.rewriteToProxy()</a></li><li data-type='method'><a href="fns#.sass">.sass()</a></li><li data-type='method'><a href="fns#.scoped$">.scoped$()</a></li><li data-type='method'><a href="fns#.setPageType">.setPageType()</a></li><li data-type='method'><a href="fns#.slashPath">.slashPath()</a></li></ul></section></div><div data-section='accordion'><section class='active'><a href="headers" class="" data-section-title>headers</a><ul class='methods' data-section-content><li data-type='method'><a href="headers#.method">method</a></li><li data-type='method'><a href="headers#.path">path</a></li><li data-type='method'><a href="headers#.statusCode">statusCode</a></li><li data-type='method'><a href="headers#.statusText">statusText</a></li><li data-type='method'><a href="headers#.versionMinor">versionMinor</a></li><li data-type='method'><a href="headers#.addHeader">.addHeader()</a></li><li data-type='method'><a href="headers#.header">.header()</a></li><li data-type='method'><a href="headers#.removeAllHeaders">.removeAllHeaders()</a></li><li data-type='method'><a href="headers#.removeHeader">.removeHeader()</a></li></ul></section></div></ul></section></div><div data-section="accordion"><section class="active"><a href="#" class="module-one" data-section-title>Global</a><ul data-section-content><li><a href="global#breakpoint">breakpoint</a></li><li><a href="global#tag">tag</a></li><li><a href="global#txt">txt</a></li></ul></section></div></ul>
  </section>
</div>

<div id="main">
    
    <h1 class="page-title">fns</h1>
    

    




<section>

<header>
    
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Use the `fns` namespace for standard Moovweb functionality.</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

        
            

    

    <h2 class="name" id=".absolutize">
        .absolutize<span class="signature">(href)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line376">Source (L376)</a>
          </small>
        
    </h2>




<p class="description">
    Converts a given origin URL to a fully-absolutized URL. Returns
the input URL if it is already absolutized, or if the address does not
reference the origin.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>href</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the URL to be absolutized.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A string for the absolutized version of the input URL.
</p>


    


    <h5>Examples</h5>
    
    <pre><code class="language-javascript">fns.absolutize("/test1/test2");
// => Returns: "//www.mysite.com/test1/test2"</code></pre>

    <pre><code class="language-javascript">fns.absolutize("test1");
// => Returns (when on http://m.mysite.com):
//    "//www.mysite.com/www.mysite.com/test1"
// => Returns (when on http://m.mysite.com/test2):
//    "//www.mysite.com/www.mysite.com/test1"
// => Returns (when on http://m.mysite.com/test2/):
//    "//www.mysite.com/www.mysite.com/test2/test1"</code></pre>

    <pre><code class="language-javascript">fns.absolutize("www.mysite.com/test");
// => Returns: "//www.mysite.com/www.mysite.com/test"</code></pre>

    <pre><code class="language-javascript">fns.absolutize("http://www.mysite.com/test");
// => Returns (stays the same): "http://www.mysite.com/test"</code></pre>

    <pre><code class="language-javascript">fns.absolutize("http://mysite.com/test");
// => Returns (stays the same, provided that the naked domain is in your
//    moov_config.json): "http://mysite.com/test"</code></pre>

    <pre><code class="language-javascript">fns.absolutize("http://mlocal.mysite.com/test");
// => Returns (stays the same): "http://mlocal.mysite.com/test"</code></pre>

    <pre><code class="language-javascript">fns.absolutize("http://www.google.com/");
// => Returns (stays the same, provided that Google is _not_ in your
//    moov_config.json): "http://www.google.com/"</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".absolutizeSrcs">
        .absolutizeSrcs<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line422">Source (L422)</a>
          </small>
        
    </h2>




<p class="description">
    Absolutizes all image and script `src` attribute values.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.absolutizeSrcs();
// => HTML input:
//    &lt;head>
//      &lt;script src="/script1.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;img src="http://mysite.com/img1.jpeg" />
//      &lt;img src="img2.gif" />
//      &lt;script src="//www.mysite.com/script2.js">&lt;/script>
//    &lt;/body>
// => HTML output (when on http://m.mysite.com/test):
//    &lt;head>
//      &lt;script src="//www.mysite.com/script1.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;img src="http://mysite.com/img1.jpeg" />
//      &lt;img src="//www.mysite.com/test/img2.gif" />
//      &lt;script src="//www.mysite.com/script2.js">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".activeLayers">
        .activeLayers<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line878">Source (L878)</a>
          </small>
        
    </h2>




<p class="description">
    Retrieves a list of active layers used to transform the project.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    An array of strings representing each active layer.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.activeLayers();
// => Context: Project has multiple layers, presumably for tests, called
//    "testA", "testB", "testC", and "testD." User starts a server running
//    only the "testA" and "testC" layers.
// => Returns: ["testA", "testC"]</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".addAssets">
        .addAssets<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line698">Source (L698)</a>
          </small>
        
    </h2>




<p class="description">
    Adds JavaScript and Sass assets. Sass assets get a
`data-mw-keep="true"` attribute-value pair added, and script assets get a
`data-keep="true"` pair added.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.addAssets();
// => HTML input:
//    &lt;head>&lt;/head>
//    &lt;body>&lt;/body>
// => HTML output (local):
//    &lt;head>
//      &lt;link rel="stylesheet" type="text/css" href="//mlocal.mysite.com/_moovweb_local_assets_/stylesheets/.css/main.css" data-mw-keep="true">
//    &lt;/head>
//    &lt;body>
//      &lt;script data-keep="true" type="text/javascript" src="//mlocal.mysite.com/_moovweb_local_assets_/javascript/main.js">&lt;/script>
//    &lt;/body>
// => HTML output (production):
//    &lt;head>
//      &lt;link rel="stylesheet" type="text/css" href="//assets.moovweb.net/project-uid/mode-uid/build-version/stylesheets/.css/main.css">
//    &lt;/head>
//    &lt;body>
//      &lt;script data-keep="true" type="text/javascript" src="//assets.moovweb.net/project-uid/mode-uid/build-version/javascript/main.js">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".addCanonicalTag">
        .addCanonicalTag<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line145">Source (L145)</a>
          </small>
        
    </h2>




<p class="description">
    Injects a canonical tag into the head, as long as one doesn't
already exist. Additionally, remove any alternate tags.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.addCanonicalTag();
// => HTML input:
//    &lt;head>&lt;/head>
// => HTML output:
//    &lt;head>
//      &lt;link rel="canonical" href="http://www.mysite.com/">
//    &lt;/head></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".addCookie">
        .addCookie<span class="signature">(name, value, [domain], [path], [expires], [secure], [httpOnly])</span>
        
          <small class="line-source">
            
              <div class="mw-banner stdlib">stdlib</div>
            
            <a href="stdlib_js#line53">Source (L53)</a>
          </small>
        
    </h2>




<p class="description">
    Adds a cookie while processing the current request.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>name</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the name of the cookie.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  
                  <code>value</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the value of the cookie.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>domain</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A string for the domain of the cookie.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>path</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A string for the path of the cookie.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>expires</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A string for the expiratoin date of the cookie.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>secure</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for if the cookie should only be
transmitted via HTTPS.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>httpOnly</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for if the cookie requires
protection against cross-site attacks.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Examples</h5>
    
    <pre><code class="language-javascript">fns.addCookie("favoriteDog", "joe", ".mysite.com");
// => Result: "favoriteDog" cookie added to the upstream domain
//    ".mysite.com", with a value of "joe"</code></pre>

    <pre><code class="language-javascript">fns.addCookie("favoriteDog", "joe", ".mysite.com", "/mydir", "Thu, 01 Jan 2021 00:00:00 GMT", true, true);
// => Result: "favoriteDog" cookie added to the upstream domain
//    ".mysite.com", with a value of "joe", over the "/mydir" path, set
//    to expire at midnight GMT on January 1, 2021, only transmitted over
//    https, with protection against cross-site attacks.</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".assert">
        .assert<span class="signature">(conditional, callback)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line965">Source (L965)</a>
          </small>
        
    </h2>




<p class="description">
    Make an assertion for conditional statement and run the callback
if the statement is correct. Generallyu used to evaluate expressions and
throw exceptions when developing locally.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>conditional</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                
                A boolean for whether the callback should run.
Usually should take the form of a full conditional statement.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  
                  <code>callback</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            <td class="description last">
                
                A callback function to run if the conditional is
true.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A boolean for the original condition.
</p>


    


    <h5>Examples</h5>
    
    <pre><code class="language-javascript">fns.assert($body.children().length > 0, function() {
  console.log("The body is nonempty.");
});
// => HTML input:
//    &lt;body>&lt;/body>
// => Throws (local): generic JavaScript Error, with broken page functionality.
// => Returns (production): false</code></pre>

    <pre><code class="language-javascript">fns.assert($body.children().length === 0, function() {
  console.log("The body is empty.");
});
// => HTML input:
//    &lt;body>&lt;/body>
// => Logs: "The body is empty."
// => Returns: true</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".asset">
        .asset<span class="signature">(pathToFile)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line118">Source (L118)</a>
          </small>
        
    </h2>




<p class="description">
    Retrieves the URL for the specified JavaScript or image asset
path, which changes depending upon the project environment.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>pathToFile</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the relative path to the asset file.
Must be relative to the <em>assets</em> directory in your project structure.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A string containing the URL for the JavaScript or image
asset.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">$body.append(tag("script", {type: "text/javascript", src: fns.asset("javascript/custom_script.js")}));
// => HTML input:
//    &lt;body>&lt;/body>
// => HTML output (local):
//    &lt;body>
//      &lt;script type="text/javascript" src="//mlocal.mysite.com/_moovweb_local_assets_/javascript/custom_script.js">&lt;/script>
//    &lt;/body>
// => HTML output (production):
//    &lt;body>
//      &lt;script type="text/javascript" src="//assets.moovweb.net/project-uid/mode-uid/build-version/javascript/custom_script.js">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".cleanMobileMetaTags">
        .cleanMobileMetaTags<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line582">Source (L582)</a>
          </small>
        
    </h2>




<p class="description">
    Sanitizes any `meta` tags related to mobile development. This
entails resetting any existing `viewport` or `format-detection` meta tags to
be Moovweb-specific, in addition to an `http-equiv` tag.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.cleanMobileMetaTags();
// => HTML input:
//    &lt;head>
//      &lt;meta name="viewport" id="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0">
//      &lt;meta name="format-detection" content="telephone=yes">
//    &lt;/head>
// => HTML output:
//    &lt;head>
//      &lt;meta http-equiv="Content-Type" content="text/html">
//      &lt;meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
//      &lt;meta name="format-detection" content="telephone=no">
//    &lt;/head></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".export">
        .export<span class="signature">(key, val)</span>
        
          <small class="line-source">
            
              <div class="mw-banner stdlib">stdlib</div>
            
            <a href="stdlib_js#line21">Source (L21)</a>
          </small>
        
    </h2>




<p class="description">
    Sets custom environment variables. Certain environment
variables will correspond to actual response headers, including the
Location header (`Location`), the "Content-Type" header (`Content-Type`),
the "Content-Encoding" header (`compression`), and the cache time field
for the Cache-Control header (`Cache-Time`).
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>key</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the environment variable key.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  
                  <code>val</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the environment variable value.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Examples</h5>
    
    <pre><code class="language-javascript">fns.export("Location", "http://www.google.com");
// => Result: Adds "Location": "http://www.google.com" to the `env` object
//    (and thus sends a redirect to Google).</code></pre>

    <pre><code class="language-javascript">fns.export("Content-Type", "application/json");
// => Result: Adds "Content-Type": "application/json" to the `env` object.</code></pre>

    <pre><code class="language-javascript">fns.export("compression", "gzip");
// => Result: Adds "Content-Encoding": "gzip" to the `env` object.</code></pre>

    <pre><code class="language-javascript">fns.export("Cache-Time", "10");
// => Result: Adds "Cache-Time": "public, max-age=fake-cache-time" to the
//    `env` object.</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".getPageType">
        .getPageType<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line1218">Source (L1218)</a>
          </small>
        
    </h2>




<p class="description">
    Access the internal `pageType` property of the environment
`env`, for the given address.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    A string for the name of the given address's `pageType`.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.getPageType();
// => Returns: name for the pageType, e.g. "home"</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".handleRobots">
        .handleRobots<span class="signature">(body)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line790">Source (L790)</a>
          </small>
        
    </h2>




<p class="description">
    Disallows robot crawling for non-production environments.
Retains origin production robot crawling settings for transformed production
environments.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>body</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string containing the original robots.txt response.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A string for the possibly-modified outgoing robots.txt
response.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.handleRobots("User-agent: *\nDisallow: /account.php\nDisallow: /cart.php");
// => Returns (local, stage): "
//      User-agent: *
//      Disallow: /
//    "
// => Returns (production; stays the same): "
//      User-agent: *
//      Disallow: /account.php
//      Disallow: /cart.php
//    "</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".highlightDevelopment">
        .highlightDevelopment<span class="signature">([position])</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line1233">Source (L1233)</a>
          </small>
        
    </h2>




<p class="description">
    Inserts a banner on the page when developing locally. This
allows for a clear differentiation between the proxied single domain site and
the original site. Alias for the legacy fns.highlight_development() method.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  [
                  <code>position</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A string for the position to place the banner ("top"
or "bottom"). Defaults to bottom positioning if "top" is not specified.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.highlightDevelopment("top");
// => HTML output: (omitted).</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".highlightPreview">
        .highlightPreview<span class="signature">([position])</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line1258">Source (L1258)</a>
          </small>
        
    </h2>




<p class="description">
    Inserts a banner on the page if viewing a preview mode. This
allows for a clear differentiation between preview modes and live modes.
Alias for the legacy fns.highlight_preview() method.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  [
                  <code>position</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A string for the position to place the banner ("top"
or "bottom"). Defaults to bottom positioning if "top" is not specified.</td>
        </tr>

    
    </tbody>
</table>
















    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.highlightPreview("top");
// => HTML output: (omitted).</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".init$">
        .init$<span class="signature">(body, [opts])</span>
        
          <small class="line-source">
            
              <div class="mw-banner stdlib">stdlib</div>
            
            <a href="stdlib_js#line191">Source (L191)</a>
          </small>
        
    </h2>




<p class="description">
    Initializes $ by loading a UTF-8 encoded string of an HTML
request into the Cheerio parsing library (generally, this would be the
global `body` variable - no `$` prefix). This also provides global
variables to efficiently query the DOM thereafter. These global variables
include the `$`, `$root`, `$html`, `$head`, and `$body` objects, which
allow you to create new Cheerio objects associated with specific DOM
traversals. This also provides access to the `scoped$` global function.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>body</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the content document.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>opts</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                An object for parsing settings, taken from <a
href="https://github.com/fb55/htmlparser2/wiki/Parser-options">htmlparser2</a>
and <a href="https://github.com/fb55/DomHandler">DomHandler</a>.
                <h5>Properties</h5>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  [
                  <code>xmlMode</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether special elements
(`script` and `style`) should get special treatment and if "empty" tags
(eg. `br`) can have children. If false, the content of special tags will
be text only. For feeds and other XML content (documents that don't
consist of HTML), set this to true. Default: false.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>decodeEntities</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether entities
within the document will not be decoded. Defaults to true.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>lowerCaseTags</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether all tags
should be lowercased. If `xmlMode` is disabled, this defaults to true.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>lowerCaseAttributeNames</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether
attribute names should be lowercased. This has a noticeable impact on
speed, so it defaults to false.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>recognizeCDATA</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether CDATA
sections will be recognized as text even if the `xmlMode` option is not
enabled. Note: If `xmlMode` is set to true, then CDATA sections will
always be recognized as text.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>recognizeSelfClosing</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether
self-closing tags will trigger the `onclosetag` event even if xmlMode is
not set to true. Note: If `xmlMode` is set to true, then self-closing
tags will always be recognized.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>normalizeWhitespace</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether
whitespace in text nodes should be normalized (replaced by single
spaces). Default: false.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>withDomLvl1</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether DOM level
1 properties should be added to all elements.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  [
                  <code>withStartIndices</code>
                  ]
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                <em>Optional.</em>
                A boolean for whether
a `startIndex` property will be added to nodes. When the parser is used
in a non-streaming fashion, `startIndex` is an integer indicating the
position of the start of the node in the document. Default: false.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    An object containing property names that correspond to
the global variables set.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.init$(body);
// => Returns: {
//      $: $,
//      scoped$: scoped$,
//      root: $root,
//      html: $html,
//      head: $head,
//      body: $body
//    }</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".insertDnsPrefetch">
        .insertDnsPrefetch<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line1150">Source (L1150)</a>
          </small>
        
    </h2>




<p class="description">
    Insert DNS prefetch elements to the `head`, allowing to resolve
DNSs before the referenced items are needed. Note that the order of the
generated prefetch tags may not be in the same order as the asset order.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.insertDnsPrefetch();
// => HTML input:
//    &lt;head>
//      &lt;link rel="stylesheet" href="http://www.twitter.com/stylesheet1.css">
//    &lt;/head>
//    &lt;body>
//      &lt;a href="http://www.bing.com/">&lt;/a>
//      &lt;img src="http://www.yahoo.com/">&lt;/a>
//      &lt;script type="text/javascript" src="http://www.google.com/script1.js">&lt;/a>
//    &lt;/body>
// => HTML output:
//    &lt;head>
//      &lt;link rel="stylesheet" href="http://www.twitter.com/stylesheet1.css">
//      &lt;link rel="dns-prefetch" href="http://www.yahoo.com/">
//      &lt;link rel="dns-prefetch" href="http://www.google.com/">
//      &lt;link rel="dns-prefetch" href="http://www.twitter.com/">
//      &lt;link rel="dns-prefetch" href="http://www.bing.com/">
//    &lt;/head>
//    &lt;body>
//      &lt;a href="http://www.facebook.com/">&lt;/a>
//      &lt;img src="http://www.microsoft.com/img1.js" />
//      &lt;script type="text/javascript" src="http://www.google.com/script1.js">&lt;/a>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".insertSubresource">
        .insertSubresource<span class="signature">(resource)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line1095">Source (L1095)</a>
          </small>
        
    </h2>




<p class="description">
    Inserts an asset as a subresource to enable early loading of
resources within the current page. For more on subresources, see the
<a href="https://www.chromium.org/spdy/link-headers-and-server-hint/link-rel-subresource">Chromium
documentation</a>.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>resource</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the href value to be used as a
subresource.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A Cheerio object associated with the newly-inserted
subresource element.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.insertSubresource("http://www.google.com/script1.js");
// => HTML input:
//    &lt;head>&lt;/head>
// => Returns: DOM object associated with the newly-created subresource
//    element.
// => HTML output:
//    &lt;head>
//      &lt;link rel="subresource" href="http://www.google.com/script1.js">
//    &lt;/head></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".isRobots">
        .isRobots<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line776">Source (L776)</a>
          </small>
        
    </h2>




<p class="description">
    Checks if the current path is /robots.txt.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    A boolean for whether the current path is /robots.txt.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.isRobots();
// => Returns (if on /robots.txt): true</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".layer">
        .layer<span class="signature">(layer)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line895">Source (L895)</a>
          </small>
        
    </h2>




<p class="description">
    Indicates whether or not the specified layer is active, with
the indicator as a boolean.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>layer</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the name of the layer to query.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A boolean for whether the layer is active.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.layer("tablet");
// => Returns (if tablet layer is active): true
// => Returns (if tablet layer is not active): false</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".layerNot">
        .layerNot<span class="signature">(layer)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line912">Source (L912)</a>
          </small>
        
    </h2>




<p class="description">
    Indicates whether or not the specified layer is inactive, with
the indicator as a boolean.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>layer</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            <td class="description last">
                
                A string for the name of the layer to query.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A boolean for whether the layer is inactive.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.layerNot("tablet");
// => Returns (if tablet layer is active): false
// => Returns (if tablet layer is not active): true</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".moveStylesAboveScripts">
        .moveStylesAboveScripts<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line1010">Source (L1010)</a>
          </small>
        
    </h2>




<p class="description">
    Move `style` and `link` elements above the `script` elements.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    A Cheerio object for the first `script` element found in the
HTML.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.moveStylesAboveScripts();
// => HTML input:
//    &lt;head>
//      &lt;link rel="stylesheet" href="/styles.scss">
//    &lt;/head>
//    &lt;body>
//      &lt;script type="text/javascript" src="/script1.js">&lt;/script>
//      &lt;style>
//        body {
//          color: red;
//        }
//      &lt;/style>
//      &lt;script type="text/javascript" src="/script2.js">&lt;/script>
//    &lt;/body>
// => Returns: Cheerio object associated with the "script1.js" `script`
//    element.
// => HTML output:
//    &lt;head>&lt;/head>
//    &lt;body>
//      &lt;link rel="stylesheet" href="/styles.scss">
//      &lt;style>
//        body {
//          color: red;
//        }
//      &lt;/style>
//      &lt;script type="text/javascript" src="/script1.js">&lt;/script>
//      &lt;script type="text/javascript" src="/script2.js">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".moveStylesToHead">
        .moveStylesToHead<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line1052">Source (L1052)</a>
          </small>
        
    </h2>




<p class="description">
    Prepend `style` and `link` elements to the `head`. To be used
in conjuction (after) the moveStylesAboveScripts() method, which takes
effect if there is no `script` elements in the `head` (this is otherwise
redundant if the first `script` is already there).
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    A Cheerio object associated with the `head` element.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">// => HTML input:
//    &lt;head>
//      &lt;link rel="stylesheet" href="/styles.scss">
//    &lt;/head>
//    &lt;body>
//      &lt;script type="text/javascript" src="/script1.js">&lt;/script>
//      &lt;style>
//        body {
//          color: red;
//        }
//      &lt;/style>
//      &lt;script type="text/javascript" src="/script2.js">&lt;/script>
//    &lt;/body>
// => Returns: Cheerio object associated with the `head` element
// => HTML output:
//    &lt;head>
//      &lt;link rel="stylesheet" href="/styles.scss">
//      &lt;style>
//        body {
//          color: red;
//        }
//      &lt;/style>
//    &lt;/head>
//    &lt;body>
//      &lt;script type="text/javascript" src="/script3.js">&lt;/script>
//      &lt;script type="text/javascript" src="/script4.js">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".onDevelopment">
        .onDevelopment<span class="signature">(callback)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line929">Source (L929)</a>
          </small>
        
    </h2>




<p class="description">
    Runs a callback function if the project is being run on a
development environment.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>callback</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            <td class="description last">
                
                A callback function to run if the project is
being run on a development environment.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A boolean indicating whether the project is being run on
a development environment (and by extension, whether the callback functoin
was run).
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.onDevelopment(function() {
  $body.append(tag("div"));
});
// => HTML input:
//    &lt;body>&lt;/body>
// => HTML input (local):
//    &lt;body>
//      &lt;div>&lt;/div>
//    &lt;/body>
// => HTML output (production; stays the same):
//    &lt;body>&lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".perfectProxy">
        .perfectProxy<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line489">Source (L489)</a>
          </small>
        
    </h2>




<p class="description">
    Rewrites the `href` links in any `a` elements to point to the
Moovweb proxy if it does not already, as well as the `src` attribute for any
`script` elements. Relative paths remain, since they are already passing
through the Moovweb engine.
This uses rewriteLinks() and rewriteJsSrcs().
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.perfectProxy();
// => HTML input:
//    &lt;head>
//      &lt;script src="/script1.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;a href="test">Test&lt;/a>
//      &lt;a href="http://www.mysite.com/test">Test&lt;/a>
//      &lt;a href="http://www.google.com/">Test&lt;/a>
//      &lt;script src="//www.mysite.com/script2.js">&lt;/script>
//      &lt;script src="//www.google.com/script3.js">&lt;/script>
//    &lt;/body>
// => HTML output (production):
//    &lt;head>
//      &lt;script src="/script1.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;a href="test">Test&lt;/a>
//      &lt;a href="http://m.mysite.com/test">Test&lt;/a>
//      &lt;a href="http://www.google.com/">Test&lt;/a>
//      &lt;script src="//m.mysite.com/script2.js">&lt;/script>
//      &lt;script src="//www.google.com/script3.js">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".queryLayerText">
        .queryLayerText<span class="signature">(layer)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line859">Source (L859)</a>
          </small>
        
    </h2>




<p class="description">
    Indicates whether or not the specified layer is active, with
the indicator as a string.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>layer</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the name of the layer to query.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A string for a boolean number, i.e. "1" if layer is active,
"0" otherwise.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.queryLayerText("tablet");
// => Returns (if tablet layer is active): "1"
// => Returns (if tablet layer is not active): "0"</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".relocateScripts">
        .relocateScripts<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line821">Source (L821)</a>
          </small>
        
    </h2>




<p class="description">
    Moves `script` elements to the bottom of the `body`, retaining
the original sequential order.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.relocateScripts();
// => HTML input:
//    &lt;head>
//      &lt;script type="text/javascript" src="/script1.js">&lt;/script>
//      &lt;meta name="viewport" id="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0">
//      &lt;script type="text/javascript" src="/script2.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;script type="text/javascript" src="/script3.js">&lt;/script>
//      &lt;div>&lt;/div>
//      &lt;script type="text/javascript" src="/script4.js">&lt;/script>
//    &lt;/body>
// => HTML output:
//    &lt;head>
//      &lt;meta name="viewport" id="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0">
//    &lt;/head>
//    &lt;body>
//      &lt;div>&lt;/div>
//      &lt;script type="text/javascript" src="/script1.js">&lt;/script>
//      &lt;script type="text/javascript" src="/script2.js">&lt;/script>
//      &lt;script type="text/javascript" src="/script3.js">&lt;/script>
//      &lt;script type="text/javascript" src="/script4.js">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".removeAllStyles">
        .removeAllStyles<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line555">Source (L555)</a>
          </small>
        
    </h2>




<p class="description">
    Removes all `link` and `style` elements.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.removeAllStyles();
// => HTML input:
//    &lt;head>
//     &lt;link rel="stylesheet" href="http://www.mysite.com/my.css" />
//    &lt;/head>
//    &lt;body>
//      &lt;style>
//        body {
//          color: red;
//        }
//      &lt;/style>
//    &lt;/body>
// => HTML output:
//    &lt;head>&lt;/head>
//    &lt;body>&lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".removeDesktopJs">
        .removeDesktopJs<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line731">Source (L731)</a>
          </small>
        
    </h2>




<p class="description">
    Removes non-ASP.NET desktop scripts that aren't explicitly
specified to be removed (using the `data-keep` attribute).
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Examples</h5>
    
    <pre><code class="language-javascript">fns.removeDesktopJs();
// => HTML input:
//    &lt;head>
//      &lt;script type="text/javascript" src="/script1.js">&lt;/script>
//      &lt;script data-keep="true" type="text/javascript" src="/script2.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;script data-keep="false" type="text/javascript" src="/script3.js">&lt;/script>
//      &lt;script data-keep="true" type="text/javascript" src="/script4.js">&lt;/script>
//    &lt;/body>
// => HTML output:
//    &lt;head>
//      &lt;script data-keep="true" type="text/javascript" src="/script2.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;script data-keep="true" type="text/javascript" src="/script4.js">&lt;/script>
//    &lt;/body></code></pre>

    <pre><code class="language-javascript">fns.removeDesktopJs();
// => HTML input:
//    &lt;head>
//      &lt;script src="//m.mysite.com/ScriptResource.axd?d=long_hash&amp;t=long_hash">&lt;/script>
//    &lt;/head>
// => HTML output (stays the same):
//    &lt;head>
//      &lt;script src="//m.mysite.com/ScriptResource.axd?d=long_hash&amp;t=long_hash">&lt;/script>
//    &lt;/head></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".removeDesktopMobileIcon">
        .removeDesktopMobileIcon<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line613">Source (L613)</a>
          </small>
        
    </h2>




<p class="description">
    Removes desktop mobile icon.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.removeDesktopMobileIcon();
// => HTML input:
//    &lt;head>
//      &lt;link rel="shortcut icon" href="http://www.mysite.com/64.png" sizes="64x64">
//      &lt;link rel="shortcut icon" href="http://www.mysite.com/128.png" sizes="128x128">
//      &lt;link rel="shortcut icon" href="http://www.mysite.com/192.png" sizes="192x192">
//      &lt;link rel="apple-touch-icon" href="http://www.mysite.com/76.png" sizes="76x76">
//      &lt;link rel="apple-touch-icon" href="http://www.mysite.com/120.png" sizes="120x120">
//      &lt;link rel="apple-touch-icon" href="http://www.mysite.com/152.png" sizes="152x152">
//      &lt;link rel="apple-touch-icon" href="http://www.mysite.com/180.png" sizes="180x180">
//    &lt;/head>
// => HTML input:
//    &lt;head>&lt;/head></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".removeHtmlComments">
        .removeHtmlComments<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line638">Source (L638)</a>
          </small>
        
    </h2>




<p class="description">
    Removes HTML comments.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.removeHtmlComments();
// => HTML input:
//    &lt;body>
//    &lt;!-- Empty body element -->
//    &lt;/body>
// => HTML output:
//    &lt;body>&lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".rewriteAspNetScripts">
        .rewriteAspNetScripts<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line529">Source (L529)</a>
          </small>
        
    </h2>




<p class="description">
    Rewrites only ASP.NET-related scripts, usually for the purpose
of access or content rewriting.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.rewriteAspNetScripts();
// => HTML input:
//    &lt;head>
//      &lt;script src="//www.mysite.com/script1.js">&lt;/script>
//      &lt;script src="//www.mysite.com/ScriptResource.axd?d=long_hash&amp;t=long_hash">&lt;/script>
//    &lt;/head>
// => HTML output (production):
//    &lt;head>
//      &lt;script src="//www.mysite.com/script1.js">&lt;/script>
//      &lt;script src="//m.mysite.com/ScriptResource.axd?d=long_hash&amp;t=long_hash">&lt;/script>
//    &lt;/head></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".rewriteJsSrcs">
        .rewriteJsSrcs<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line455">Source (L455)</a>
          </small>
        
    </h2>




<p class="description">
    Rewrites all `src` attributes for `script` elements. Works on
HTML fragments, since this navigates from the root element.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.rewriteJsSrcs();
// => HTML input:
//    &lt;head>
//      &lt;script src="/script1.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;img src="http://mysite.com/img1.jpeg" />
//      &lt;img src="img2.gif" />
//      &lt;script src="//www.mysite.com/script2.js">&lt;/script>
//    &lt;/body>
// => HTML output (production):
//    &lt;head>
//      &lt;script src="//m.mysite.com/script1.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;img src="http://mysite.com/img1.jpeg" />
//      &lt;img src="img2.gif" />
//      &lt;script src="//m.mysite.com/script2.js">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".rewriteLink">
        .rewriteLink<span class="signature">(hostHH)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line270">Source (L270)</a>
          </small>
        
    </h2>




<p class="description">
    Rewrites a given absolute link to the Moovweb proxy (using
rewriteToProxy(), with default settings applied).
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>hostHH</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the host link to be rewritten.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A string containing the link rewritten to the Moovweb proxy.
</p>


    


    <h5>Examples</h5>
    
    <pre><code class="language-javascript">fns.rewriteLink("www.mysite.com");
// => Returns (local): "mlocal.mysite.com"
// => Returns (production with CNAME): "m.mysite.com"
// => Returns (moovapp staging): "m.mysite.com.moovapp.com"</code></pre>

    <pre><code class="language-javascript">fns.rewriteLink("//www.mysite.com");
// => Returns (local): "//mlocal.mysite.com"
// => Returns (production with CNAME): "//m.mysite.com"
// => Returns (moovapp staging): "//m.mysite.com.moovapp.com"</code></pre>

    <pre><code class="language-javascript">fns.rewriteLink("https://mysite.com");
// => Returns (local, if naked subdomain in moov_config.json):
//    "https://mlocal.mysite.com"
// => Returns (production CNAME, if naked subdomain in moov_config.json):
//    "https://m.mysite.com"
// => Returns (moovapp staging, if naked subdomain in moov_config.json):
//    "https://m.mysite.com.moovapp.com"
// => Returns (if naked subdomain _not_ in moov_config.json):
//    "https://mysite.com"</code></pre>

    <pre><code class="language-javascript">fns.rewriteLink("http://www.google.com/");
//=> Returns (if origin is not Google): "http://www.google.com/"</code></pre>

    <pre><code class="language-javascript">fns.rewriteLink("/test.js");
// => Returns (stays the same): "/test.js"</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".rewriteLinks">
        .rewriteLinks<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line316">Source (L316)</a>
          </small>
        
    </h2>




<p class="description">
    Rewrites all links (`a` and `base` elements) to the correct
domain.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.rewriteLinks();
// => HTML input:
//    &lt;head>
//      &lt;base href="http://www.mysite.com/">
//    &lt;/head>
//    &lt;body>
//      &lt;a href="www.mysite.com/">Test&lt;/a>
//      &lt;a href="//www.mysite.com/">Test&lt;/a>
//      &lt;a href="//www.google.com/">Test&lt;/a>
//    &lt;/body>
// => HTML output:
//    &lt;head>
//      &lt;base href="http://m.mysite.com/" />
//    &lt;/head>
//    &lt;body>
//      &lt;a href="m.mysite.com/">Test&lt;/a>
//      &lt;a href="//m.mysite.com/">Test&lt;/a>
//      &lt;a href="//www.google.com/">Test&lt;/a>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".rewriteToProxy">
        .rewriteToProxy<span class="signature">(hostHH, secure, catchAll)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line172">Source (L172)</a>
          </small>
        
    </h2>




<p class="description">
    Rewrites a given link to the Moovweb proxy, given additional
security and domain settings.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>hostHH</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the host link to be rewritten.</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  
                  <code>secure</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            <td class="description last">
                
                A boolean for whether you're on the secure protocol,
allowing for the rewriting process to speed up if in the proper environment</td>
        </tr>

    

        <tr>
            
                <td class="name">
                  
                  <code>catchAll</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for a catch-all domain, such as
.moovapp.com (for when a CNAME isn't set up and your project is pushed to
the Moovweb staging cluster).</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A string containing the link rewritten to the Moovweb proxy.
</p>


    


    <h5>Examples</h5>
    
    <pre><code class="language-javascript">fns.rewriteToProxy("www.mysite.com", false, env.__catch_all__);
// => Returns (local): "mlocal.mysite.com"
// => Returns (production with CNAME): "m.mysite.com"
// => Returns (moovapp staging): "m.mysite.com.moovapp.com"</code></pre>

    <pre><code class="language-javascript">fns.rewriteToProxy("//www.mysite.com", false, env.__catch_all__);
// => Returns (local): "//mlocal.mysite.com"
// => Returns (production with CNAME): "//m.mysite.com"
// => Returns (moovapp staging): "//m.mysite.com.moovapp.com"</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".sass">
        .sass<span class="signature">(baseName)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line671">Source (L671)</a>
          </small>
        
    </h2>




<p class="description">
    Retrieves the URL for the specified Sass asset path, which
changes depending upon the project environment.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>baseName</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            <td class="description last">
                
                A string for the relative path to the asset file.
Must be relative to the <em>assets/stylesheets</em> directory in your project
structure.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A string containing the URL for the compiled CSS asset.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">$head.append(tag("link", {rel: "stylesheet", type: "text/css", href: fns.sass("main")}));
// => HTML input:
//    &lt;head>&lt;/head>
// => HTML output (local):
//    &lt;head>
//      &lt;link rel="stylesheet" type="text/css" href="//mlocal.mysite.com/_moovweb_local_assets_/stylesheets/.css/main.css">
//    &lt;/head>
// => HTML output (production):
//    &lt;head>
//      &lt;link rel="stylesheet" type="text/css" href="//assets.moovweb.net/project-uid/mode-uid/build-version/stylesheets/.css/main.css">
//    &lt;/head></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".scoped$">
        .scoped$<span class="signature">($)</span>
        
          <small class="line-source">
            
              <div class="mw-banner stdlib">stdlib</div>
            
            <a href="stdlib_js#line99">Source (L99)</a>
          </small>
        
    </h2>




<p class="description">
    Narrows down parts of the DOM you wish to use. `$this` is
implicitly redefined to the Cheerio object for `this`. Nesting `scoped$`
will maintain the current scope. When you reference a Cheerio object
outside the scope from within it supercedes the scope and can be used to
access DOM elements outside the current scope. For example, you can
access and modify specific elements outside the scope using
`$body.find()`.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>$</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            <td class="description last">
                
                A Cheerio object to traverse down.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    A modified Cheerio reference given the original input
selector as the new "root."
</p>


    


    <h5>Examples</h5>
    
    <pre><code class="language-javascript">scoped$($body, function(){
    scoped$("script", function(){
        $this.attr("data-mw-keep", true);
    });
});
// => HTML input:
//    &lt;body>
//      &lt;script type="text/javascript" src="/script1.js">&lt;/script>
//    &lt;/body>
// => Returns: Cheerio object assocaited with the `body` element
// => HTML input:
//    &lt;body>
//      &lt;script type="text/javascript" src="/script1.js" data-mw-keep="true">&lt;/script>
//    &lt;/body></code></pre>

    <pre><code class="language-javascript">scoped$($body, function() {
  scoped$("script", function() {
    $this.attr("data-body", true);
  });
  $body.find("script").attr("data-global", true);
});
// => HTML input:
//    &lt;head>
//      &lt;script type="text/javascript" src="/script1.js">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;script type="text/javascript" src="/script2.js">&lt;/script>
//    &lt;/body>
// => Returns: Cheerio object assocaited with the `body` element
// => HTML input:
//    &lt;head>
//      &lt;script type="text/javascript" src="/script1.js" data-global="true">&lt;/script>
//    &lt;/head>
//    &lt;body>
//      &lt;script type="text/javascript" src="/script2.js" data-body="true" data-global="true">&lt;/script>
//    &lt;/body></code></pre>




<hr />

        
            

    

    <h2 class="name" id=".setPageType">
        .setPageType<span class="signature">(type)</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line1195">Source (L1195)</a>
          </small>
        
    </h2>




<p class="description">
    Sets the internal `pageType` property for the environment `env`.
In production, this is specifically used for writing in the "pageType" field
on the Moovweb Control Center's Stack Trace feature.
</p>









    <h5>Parameters</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name">
                  
                  <code>type</code>
                  
                </td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            <td class="description last">
                
                A string for the name of the `pageType` to set.</td>
        </tr>

    
    </tbody>
</table>














<h5>Return Value</h5>

        
<p class="param-desc">
    `undefined`
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.setPageType(routes.pageType.name);
// => Result: Stack Trace reads the `pageType` as "home".
// => Note: Already included in the generator's fns.constructPageType()
//    method call.</code></pre>




<hr />

        
            

    

    <h2 class="name" id=".slashPath">
        .slashPath<span class="signature">()</span>
        
          <small class="line-source">
            
              <div class="mw-banner functions">functions</div>
            
            <a href="functions_js#line353">Source (L353)</a>
          </small>
        
    </h2>




<p class="description">
    Gives the string for the given path's parent directory.
</p>





















<h5>Return Value</h5>

        
<p class="param-desc">
    A string for the slash path.
</p>


    


    <h5>Example</h5>
    
    <pre><code class="language-javascript">fns.slashPath();
// => Returns (when on http://m.mysite.com/):
//    "/"
// => Returns (when on http://m.mysite.com/product):
//    "/"
// => Returns (when on http://m.mysite.com/product/):
//    "/product"
// => Returns (when on http://m.mysite.com/product/mittens):
//    "/product"
// => Returns (when on http://m.mysite.com/product/mittens/):
//    "/product/mittens"</code></pre>




<hr />

        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    <i>Last updated Wed Sep 28 2016 21:41:45 GMT+0000 (UTC)</i>
</footer>

<script>prettyPrint();</script>
</body>