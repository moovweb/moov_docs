<body>

<div class="split-container">
  <div data-section="accordion" id="content-nav" class="module-nav media">
    <div class="module-sidebar" id="content-sidebar"><div class='sidebar-head'>moov_cache</div><div class='sidebar-body'><a href='/modules/moov_cache/index' class='L1'>README</a><div class='L1-container'><div class='L1-button'><a href="cache.html" class="L1">cache Namespace</a></div><ul class='methods L1-content'><li data-type='method'><a href="cache#.enable" class="L1">.enable()</a></li><li data-type='method'><a href="cache#.enable_for" class="L1">.enable_for()</a></li><li data-type='method'><a href="cache#.force" class="L1">.force()</a></li><li data-type='method'><a href="cache#.force" class="L1">.force()</a></li><li data-type='method'><a href="cache#.html" class="L1">.html()</a></li></ul></div></div></div>
  </div>

  <div id="main" class="module-content data">
      

      



    









    


    <div class="breadcrumbs">
      <a href="/">Home</a>
      &raquo; <a href="/docs">Documentation</a>
      &raquo; moov_cache
    </div>
    <section class="readme">
        <article><h1>moov_cache</h1><h2>Introduction</h2><p>moov_cache is a MoovJS Node module that provides a number of methods to enable
caching for your Moovweb-transformed project site.</p>
<h2>Documentation</h2><h3>Example usage</h3><p>To instantiate a new moov_cache object in your MoovJS project, you can use the
following:</p>
<pre class="prettyprint source"><code>var moov_cache = require(&quot;moov_cache&quot;);
var cache = new moov_cache(fns, $, env);</code></pre><p>In this example, we are using <code>fns</code>, <code>$</code>, and <code>env</code> global objects available
in the Node.js VM where your code is executed. <code>fns</code> refers to
<a href="http://github.com/moovweb/moov_stdlib">moov_stdlib</a>, used as a source of
exports, <code>$</code> is an instance of
<a href="http://github.com/moovweb/moov_cheerio">moov_cheerio</a>, used as the HTML
content selector, and <code>env</code> is a reference to the set of environment variables
associated with a request as it goes through the Moovweb server.</p>
<h3>API</h3><h4>cache.enable()</h4><p>Enables the caching header for the page.</p>
<p>This function will set the cache header of your page to true with no additional
parameters</p>
<h4>cache.enable_for(seconds)</h4><p>Enables caching of things for a specified period of time.</p>
<p>This function will set the necessary headers to tell Moovweb to cache the
current response. The parameter is the number of seconds to cache things for.</p>
<h4>cache.force()</h4><p>Adds a forced caching header to the page.</p>
<p>This function will set the cache control header to a non-zero TTL. The cache
headers will be set regardless of the upstream response's cache headers (even if
its set to max-age 0 for example).</p>
<h4>cache.force_for(seconds)</h4><p>Forces caching of things for a specified period of time in Moovweb's cache only.</p>
<p>This function will set the necessary headers to tell Moovweb to cache the
current response and strip other caching headers out. The parameter is the
number of seconds to cache things for.</p>
<h4>html(tag,enc)</h4><p>This html function sets up the page so that content you label dynamic is fetched
as needed, but still allows the static section of the page to be cached.</p>
<p>This will set up the page so that all chosen tag parts(e.g. div) with the
&quot;dynamic&quot; attribute are stripped out and will be loaded later. If it is a
fragment/dynamic hit, content in the cachebox will be stored into a JSON array
and get returned.</p>
<p>Unlike tritium html scope, enc argument will not change the encoding but just
export &quot;Content-Type-Charset&quot; to be the enc. If enc is undefined, the encoding
flag will set &quot;utf-8&quot; as default.</p>
<h4>dynamic_section(tag,selector)</h4><p>This function goes hand-in-hand with the cache function to allow dynamic
sections to be flagged and loaded later. Use this function to specify dynamic
content that should not be cached.</p>
<h2>Development</h2><h3>Quick Start</h3><pre class="prettyprint source"><code>$ cp .npmrc.example .npmrc
$ npm install</code></pre><p>This will build the Node modules that moov_cache depends under the local
moov_cache directory. The npm-shrinkwrap.json file is used to version-lock all
dependencies.</p>
<h3>Run tests</h3><pre class="prettyprint source"><code>$ npm test</code></pre><h3>Run Locally via Node CLI</h3><pre class="prettyprint source"><code>$ node --harmony
...
> var moov_cache = require(&quot;./main.js&quot;);</code></pre></article>
    </section>






      <div class="timestamp">
          <i>Last updated Wed Jan 18 2017 01:33:47 GMT+0000 (UTC)</i>
      </div>
  </div>
</div>
</body>