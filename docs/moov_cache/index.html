<body>

<div data-section="accordion" id="content-nav">
  <section>
      <ul class="doc-sidebar" data-section-content id="content-sidebar"><div data-section="accordion"><section class="active"><a href="#" class="module-one" data-section-title>Classes</a><ul data-section-content><div data-section='accordion'><section class='active'><a href="module_moov_cache_Cache" class="" data-section-title>Cache</a><ul class='methods' data-section-content><li data-type='method'><a href="module_moov_cache_Cache#enable">enable()</a></li><li data-type='method'><a href="module_moov_cache_Cache#enable_for">enable_for()</a></li><li data-type='method'><a href="module_moov_cache_Cache#force">force()</a></li><li data-type='method'><a href="module_moov_cache_Cache#force_for">force_for()</a></li><li data-type='method'><a href="module_moov_cache_Cache#html">html()</a></li></ul></section></div></ul></section></div><div data-section="accordion"><section class="active"><a href="#" class="module-one" data-section-title>Modules</a><ul data-section-content><li><a href="module_moov_cache">moov_cache</a></li></ul></section></div></ul>
  </section>
</div>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>moov_cache</h1><p>Javascript Cache Module</p>
<h2>Quick Start</h2><p><code>npm install</code></p>
<p>This will build the Node modules that moov_cache depends on and everything will be set up locally under the moov_cache folder.</p>
<h2>Example usage</h2><p>To instantiate a new moov_cache object in your MoovJS project, you can use the following:</p>
<p><code>var moov_cache = require(&quot;moov_cache&quot;);</code></p>
<p><code>var cache = new moov_cache(fns, cheerio, ctx.Env);</code></p>
<p>In this example, we are using fns, cheerio, and ctx.Env global objects available in the Node.js VM where your code is executed.</p>
<p>In the above example, fns refers to <a href="http://github.com/moovweb/moov_stdlib">Moov_Stdlib</a>, used as a source of exports,
cheerio is an instance of <a href="http://github.com/moovweb/moov_cheerio">Moov_Cheerio</a>, used as the html content selector, and ctx.Env is a reference to the set of environment variables associated with a request as it goes through the moov server.</p>
<h2>Api</h2><h3>cache.enable()</h3><p>Enables the caching header for the page.</p>
<p>This function will set the cache header of your page to true with no additional parameters</p>
<h3>cache.enable_for(seconds)</h3><p>Enables caching of things for a specified period of time.</p>
<p>This function will set the necessary headers to tell Moovweb to cache the current response. The parameter is the number of seconds to cache things for.</p>
<h3>cache.force()</h3><p>Adds a forced caching header to the page.</p>
<p>This function will set the cache control header to a non-zero TTL. The cache headers will be set
regardless of the upstream response's cache headers (even if its set to max-age 0 for example).</p>
<h3>cache.force_for(seconds)</h3><p>Forces caching of things for a specified period of time in Moovweb's cache only.</p>
<p>This function will set the necessary headers to tell Moovweb to cache the current response and strip other caching headers out. The parameter is the number of seconds to cache things for.</p>
<h3>html(tag,enc)</h3><p>This html function sets up the page so that content you label dynamic is fetched as needed, but still allows the static section of the page to be cached.
This will set up the page so that all chosen tag parts(e.g. div) with the &quot;dynamic&quot; attribute are stripped out and will be loaded later. If it is a fragment/dynamic hit, content in the cachebox will be stored into a JSON array and get returned.</p>
<p>Unlike tritium html scope, enc argument will not change the encoding but just export &quot;Content-Type-Charset&quot; to be the enc. If enc is undefined, the encoding flag will set &quot;utf-8&quot; as default.</p>
<h3>dynamic_section(tag,selector)</h3><p>This function goes hand-in-hand with the cache function to allow dynamic sections to be flagged and loaded later. Use this function to specify dynamic content that should not be cached.</p>
<h2>Run tests</h2><p><code>npm test</code></p>
<h2>Run Locally via Node CLI</h2><p><code>node --harmony</code></p>
<p><code>&gt; var moov_cache = require(&quot;./main.js&quot;);</code></p></article>
    </section>






</div>

<br class="clear">

<footer>
    <i>Last updated Mon Oct 10 2016 20:41:28 GMT+0000 (UTC)</i>
</footer>

<script>prettyPrint();</script>
</body>